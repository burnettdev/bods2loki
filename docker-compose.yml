services:
  bods2loki:
    container_name: bods2loki
    image: ghcr.io/burnettdev/bods2loki:main
    restart: unless-stopped
    environment:
      # BODS API Configuration
      - BODS_API_KEY=${BODS_API_KEY}
      - BODS_LINE_REFS=${BODS_LINE_REFS:-49x}
      - BODS_INTERVAL=${BODS_INTERVAL:-30s}
      
      # Loki Configuration
      - BODS_LOKI_URL=${BODS_LOKI_URL:-http://loki:3100}
      - BODS_LOKI_USER=${BODS_LOKI_USER}
      - BODS_LOKI_PASSWORD=${BODS_LOKI_PASSWORD}
      
      # Logging Configuration
      - LOG_LEVEL=${LOG_LEVEL:-info}
      
      # OpenTelemetry Tracing Configuration (Optional)
      - OTEL_TRACING_ENABLED=${OTEL_TRACING_ENABLED:-false}
      - OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=${OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:-http://localhost:4318}
      - OTEL_TRACES_SAMPLER=${OTEL_TRACES_SAMPLER:-always_on}
      - OTEL_EXPORTER_OTLP_TRACES_INSECURE=${OTEL_EXPORTER_OTLP_TRACES_INSECURE:-}
      - OTEL_EXPORTER_OTLP_TRACES_HEADERS=${OTEL_EXPORTER_OTLP_TRACES_HEADERS:-}

      # Pyroscope Profiling Configuration (Optional)
      - PYROSCOPE_PROFILING_ENABLED=${PYROSCOPE_PROFILING_ENABLED:-false}
      - PYROSCOPE_SERVER_ADDRESS=${PYROSCOPE_SERVER_ADDRESS:-http://localhost:4040}
      - PYROSCOPE_APPLICATION_NAME=${PYROSCOPE_APPLICATION_NAME:-bods2loki}
      - PYROSCOPE_BASIC_AUTH_USER=${PYROSCOPE_BASIC_AUTH_USER:-}
      - PYROSCOPE_BASIC_AUTH_PASSWORD=${PYROSCOPE_BASIC_AUTH_PASSWORD:-}
